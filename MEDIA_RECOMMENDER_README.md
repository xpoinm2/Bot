# –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –¥–ª—è –±–æ—Ç–∞

## –û–±–∑–æ—Ä

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ò–ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã (–≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–∏–¥–µ–æ, —Å—Ç–∏–∫–µ—Ä—ã, –ø–∞—Å—Ç—ã) –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **MediaRecommender** (`media_recommender.py`)
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `library/{user_id}/`
   - –°–æ–∑–¥–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —Ç–µ–º—ã)
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤** (`OpenAi_helper.py`)
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ `generate_dating_ai_variants()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–µ–¥–∏–∞-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂: `(—Ç–µ–∫—Å—Ç–æ–≤—ã–µ_–≤–∞—Ä–∏–∞–Ω—Ç—ã, –º–µ–¥–∏–∞_—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)`

3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∞** (`tg_manager_bot_dynamic.py`)
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ–¥–∏–∞-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–µ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
library/{user_id}/
‚îú‚îÄ‚îÄ voices/          # –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (.ogg)
‚îú‚îÄ‚îÄ video/           # –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ stickers/        # –°—Ç–∏–∫–µ—Ä—ã
‚îî‚îÄ‚îÄ pastes/          # –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–∞—Å—Ç—ã (.txt)
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤
–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `MediaRecommender`:
- –°–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–º—ã (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –≤–æ–ø—Ä–æ—Å—ã –æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏, –µ–¥–∞ –∏ —Ç.–¥.)

### 2. –ê–Ω–∞–ª–∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:
- –ò—â–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–µ–º—ã
- –†–∞–Ω–∂–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

### 3. AI-—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω OpenAI API –∫–ª—é—á:
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ø-—Ñ–∞–π–ª—ã –Ω–∞ –∞–Ω–∞–ª–∏–∑ –ò–ò
- –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏—á–∏–Ω—ã –≤—ã–±–æ—Ä–∞

### 4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤—ã–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è:
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∂–¥–æ–≥–æ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
**–í—Ö–æ–¥—è—â–µ–µ:** "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- üé§ `–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ.ogg` (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 95%)
- üé§ `–∫–∞–∫ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ.ogg` (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 78%)

### –ü—Ä–∏–º–µ—Ä 2: –í–æ–ø—Ä–æ—Å –æ –µ–¥–µ
**–í—Ö–æ–¥—è—â–µ–µ:** "–ß—Ç–æ —Ç—ã –ª—é–±–∏—à—å –≥–æ—Ç–æ–≤–∏—Ç—å?"
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- üìÑ `–ª—é–±–ª—é_–≥–æ—Ç–æ–≤–∏—Ç—å.txt` (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 92%)
- üé• `–≥–æ—Ç–æ–≤–∫–∞.mp4` (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 67%)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø–∞–ø–∫–∞:
```
library/{user_id}/
‚îú‚îÄ‚îÄ voices/
‚îú‚îÄ‚îÄ video/
‚îú‚îÄ‚îÄ stickers/
‚îî‚îÄ‚îÄ pastes/
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ OpenAI API –∫–ª—é—á:
```bash
export OPENAI_API_KEY="your_api_key_here"
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
1. –î–æ–±–∞–≤—å—Ç–µ –ø–∞–ø–∫—É –≤ `library/{user_id}/`
2. –û–±–Ω–æ–≤–∏—Ç–µ `media_types` –≤ `MediaRecommender.__init__()`
3. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–¥–∏–∞

### –£–ª—É—á—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
- –î–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–æ–≤ (–¥–ª—è –ø–∞—Å—Ç)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –î–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π:
```python
# –ü—Ä–∏–º–µ—Ä: –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã
if "—Å–ø–∞—Å–∏–±–æ" in message.lower():
    recommendations.insert(0, special_thanks_file)
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª–∞—Å—Å MediaRecommendation
```python
@dataclass
class MediaRecommendation:
    file_path: str          # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
    file_type: str          # 'voice', 'video', 'sticker', 'paste'
    relevance_score: float  # 0-1, —Å—Ç–µ–ø–µ–Ω—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
    reason: str            # –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω —ç—Ç–æ—Ç —Ñ–∞–π–ª
    metadata: Dict[str, Any] # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```

### –§–æ—Ä–º–∞—Ç –º–µ–¥–∏–∞-–¥–∞–Ω–Ω—ã—Ö –≤ PendingAIReply
```python
media_suggestions: List[Dict[str, Any]] = [
    {
        'file_path': 'library/123/voices/hello.ogg',
        'file_type': 'voice',
        'relevance_score': 0.95,
        'reason': '–§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ',
        'filename': '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ.ogg'
    }
]
```

## –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
–ó–∞–ø—É—Å—Ç–∏—Ç–µ `test_media_recommender.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
```bash
python test_media_recommender.py
```

### –õ–æ–≥–∏
–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ `bot.log` —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[MediaRecommender]`.

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ**: –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤—ã–±–æ—Ä–∞ –∞–¥–º–∏–Ω–æ–≤
2. **–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Ç–æ—Ä–∏–∏**: –£—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –†–∞–∑–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã —Å –≤—ã—Å–æ–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫ `library/`
2. –ù–∞–ª–∏—á–∏–µ OpenAI API –∫–ª—é—á–∞
3. –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
4. –õ–æ–≥–∏ –±–æ—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
